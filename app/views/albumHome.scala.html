@import models.album.Album
@import models.review.Review
@import models.album.AlbumFull
@(reviews: List[Review], album: AlbumFull, reviewForm: Form[Review], msg: String)(implicit messages: Messages, session: Session)

@import helper._

@main(album.name) {

    <h2>@album.name reviews</h2>

    <img src="@album.getLargeImage().url" />

    @if(msg.length > 0) {
        <h3>@msg</h3>
    }

    @helper.form(action = routes.AlbumController.addReview(album.id)){
@*//        @inputText(reviewForm("albumId"), 'style -> "display: none")*@
@*//        @inputText(reviewForm("userId"), 'style -> "display: none")*@
        @textarea(reviewForm("content"),
            '_showConstraints -> false, 'rows -> 10, 'cols -> 100)

        <input type="hidden" id="albumId" name="albumId" value="@album.id"/>
        <input type="hidden" id="userId" name="userId" value="@session.get("userId")"/>

        <div class="form-actions">
            <input type="submit" class="" value="Add Review">
        </div>
    }

    <table border="1">
        @for(r <- reviews){
            <tr>
                <td>
                    @r.userId
                </td>
                <td>
                    @r.getFormattedDate()
                </td>
                <td>
                    @*<a href="@controllers.routes.AlbumController."*@
                    @r.content
                </td>
            </tr>
        }
    </table>

}